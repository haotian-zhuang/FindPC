---
title: "findPC - User Manual"
author: "Haotian Zhuang"
#output: rmarkdown::html_vignette
#vignette: >
#  %\VignetteIndexEntry{UserManual}
#  %\VignetteEngine{knitr::rmarkdown}
#  %\VignetteEncoding{UTF-8}
output:
  html_document:
#    theme: united
#    df_print: kable
date: 'Compiled: `r format(Sys.Date(), "%m/%d/%Y")`'
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

# Introduction
findPC is a software tool including six methods to automatically select the number of principal components to retain based on the standard deviations explained by each PC. A major advantage of findPC is that the only information required is a numeric vector of standard deviations explained by each PC.

# Installation
findPC software can be installed via Github. Users should have R installed on their computer before installing findPC. R can be downloaded here: http://www.r-project.org/. To install the latest version of findPC package via Github, run following commands in R:
```{r message=FALSE,warning=FALSE}
if (!require("devtools"))
install.packages("devtools")
devtools::install_github("haotian-zhuang/findPC")
library(findPC)
```

# findPC function
The synopsis of findPC is:  
`findPC(sdev,number = 30,method = 'perpendicular line',aggregate = NULL,figure = FALSE)`

The default is to return the number of PCs by Perpendicular line with 30 PCs. The following codes take the 50 PCs of human fetal brain tissue as an example.
```{r}
sdev<-c(6.909905,5.891180,5.110216,3.996021,3.541697,
        2.708781,2.636483,2.476862,2.420636,2.345929,
        2.285914,2.197029,2.157942,2.067661,1.977431,
        1.905260,1.882831,1.819860,1.797364,1.763118,
        1.734229,1.721318,1.700343,1.694309,1.682183,
        1.677859,1.668176,1.658513,1.656305,1.648881,
        1.629452,1.626978,1.622602,1.614844,1.610602,
        1.603669,1.598074,1.593364,1.586666,1.584247,
        1.580981,1.574226,1.568660,1.567932,1.562935,
        1.557284,1.554781,1.551753,1.547596,1.543069)
findPC(sdev = sdev)
```

The argument 'sdev' should be sorted in decreasing order.
```{r, error=TRUE}
findPC(sdev = -sdev)
```

## Number
The argument 'number' is a vector including number of PCs used in the following function.
```{r, error=TRUE}
findPC(sdev = sdev,number = 51)
```

```{r}
findPC(sdev = sdev,number = c(16,20,28))
```

## Method
The argument ‘method’ specifies the six methods or returns the six results simultaneously.
```{r, error=TRUE}
findPC(sdev = sdev,method = 'xxx')
```

```{r}
findPC(sdev = sdev,number = c(16,20,28),method = 'all')
```

**Method 1: Piecewise linear model**
```{r}
findPC(sdev = sdev,number = c(16,20,28),method = 'piecewise linear model')
```

**Method 2: First derivative**
```{r}
findPC(sdev = sdev,number = c(16,20,28),method = 'first derivative')
```

**Method 3: Second derivative**
```{r}
findPC(sdev = sdev,number = c(16,20,28),method = 'second derivative')
```

**Method 4: Preceding residual**
```{r}
findPC(sdev = sdev,number = c(16,20,28),method = 'preceding residual')
```

**Method 5: Perpendicular line**
```{r}
findPC(sdev = sdev,number = c(16,20,28),method = 'perpendicular line')
```

**Method 6: K-means clustering**
```{r}
findPC(sdev = sdev,number = c(16,20,28),method = 'k-means clustering')
```

## Aggregate
If users are also interested in the mean, median, or voting (median if all are different, otherwise mode) of the results, the argument ‘aggregate’ will support them.
```{r}
findPC(sdev = sdev,number = c(16,20,28),method = 'all',aggregate = 'mean')
findPC(sdev = sdev,number = c(16,20,28),method = 'all',aggregate = 'median')
findPC(sdev = sdev,number = c(16,20,28),method = 'all',aggregate = 'voting')
```

## Figure
The last argument ‘figure’ provides the option to draw a heatmap showing the results.
```{r, fig.width=8, fig.height=3}
findPC(sdev = sdev,number = c(16,20,28),method = 'all',figure = T)
```

<details>
  <summary>**Session Info**</summary>
```{r}
sessionInfo()
```
</details>
